<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="default-src *; script-src * 'unsafe-inline' 'unsafe-eval'; style-src * 'unsafe-inline'; img-src * data:;">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="mobile-web-app-capable" content="yes">
  <title>TellStones</title>
  <!-- Adicione aqui o link para o CSS -->
  <!-- <link rel="stylesheet" href="style.css"> -->
</head>

<body>

  <!-- ================= PLACAR CENTRAL ================= -->
  <div id="placar-turno-central" style="display:none;"></div>

  <!-- ================= TELA INICIAL ================= -->
  <div id="start-screen" class="active">
    <h1>TellStones</h1>
    <div>
      <button id="create-room-btn">Criar Sala</button>
      <button id="join-room-btn">Entrar em Sala</button>
    </div>
    <!-- Opções para criar sala/lobby -->
    <div id="room-options" style="display:none;">
      <label>
        <input type="radio" name="mode" value="1x1" checked> 1x1 (Duelo)
      </label>
      <label>
        <input type="radio" name="mode" value="2x2"> 2x2 (Duplas)
      </label>
      <br>
      <input type="text" id="nome-criar" placeholder="Seu nome" maxlength="20" style="margin:10px 0;width:90%"><br>
      <button id="start-game-btn">Criar Lobby</button>
      <div id="codigo-sala-criada" style="margin-top:10px;color:#8ecfff;font-weight:bold;"></div>
    </div>
    <!-- Opções para entrar em sala -->
    <div id="join-room" style="display:none;">
      <input type="text" id="nome-entrar" placeholder="Seu nome" maxlength="20" style="margin-bottom:8px;width:90%"><br>
      <input type="text" id="room-code" placeholder="Código da sala" maxlength="8" style="margin-bottom:8px;width:90%"><br>
      <label style="color:#f1f1f1;">
        <input type="radio" name="tipo-entrada" value="jogador" checked> Jogador
      </label>
      <label style="color:#f1f1f1;">
        <input type="radio" name="tipo-entrada" value="espectador"> Espectador
      </label><br>
      <button id="enter-room-btn">Entrar</button>
    </div>
  </div>

  <!-- ================= LOBBY ================= -->
  <div id="lobby">
    <h2>Lobby da Partida</h2>
    <div id="lobby-codigo" style="margin-bottom:10px;"></div>
    <div>
      <strong>Jogadores:</strong>
      <ul id="lobby-jogadores"></ul>
    </div>
    <div>
      <strong>Espectadores:</strong>
      <ul id="lobby-espectadores"></ul>
    </div>
    <button id="lobby-iniciar" style="display:none;margin-top:20px;">Iniciar Jogo</button>
  </div>

  <!-- ================= TELA DE JOGO ================= -->
  <div id="game">
    <!-- Informações da sala e espectadores -->
    <div id="info-sala">
      <div id="codigo-sala">Código: <span id="codigo-sala-valor"></span></div>
      <div id="espectadores">Espectadores: <span id="lista-espectadores"></span></div>
    </div>
    <!-- Ícone para abrir ações possíveis -->
    <div id="icone-acoes" title="Ações" style="padding:0;width:60px;height:60px;display:flex;align-items:center;justify-content:center;background:none;border:none;">
      <img src="https://github.com/AliceDeSa/Tellstones/raw/main/A%C3%A7%C3%B5es.png" alt="Ações" style="width:54px;height:54px;object-fit:contain;display:block;" />
    </div>
    <!-- Card de ações possíveis (pode ser renderizado via JS) -->
    <div id="box-acoes" style="display:none;">
      <h3>Ações Possíveis</h3>
      <ul>
        <li><strong>Colocar:</strong> Adiciona pedra à mesa.</li>
        <li><strong>Esconder:</strong> Vira uma pedra para baixo.</li>
        <li><strong>Mover:</strong> Muda posição de uma pedra.</li>
        <li><strong>Trocar:</strong> Troca duas pedras de lugar.</li>
        <li><strong>Espiar:</strong> Olha uma pedra virada.</li>
        <li><strong>Desafiar:</strong> Testa o oponente sobre uma pedra virada.</li>
        <li><strong>Se Gabar:</strong> Afirma saber todas as posições.<br>
          <small>O oponente pode responder:<br>
            <b>1. Acreditar:</b> O jogador que fez a ação ganha 1 ponto.<br>
            <b>2. Duvidar:</b> O jogador deve provar que sabe a combinação das peças.<br>
            &nbsp;&nbsp;&nbsp;&nbsp;Se conseguir, vence o jogo imediatamente.<br>
            &nbsp;&nbsp;&nbsp;&nbsp;Se errar qualquer pedra, o oponente vence.<br>
            <b>3. Se gabar:</b> O oponente diz que também sabe onde estão todas as peças.<br>
            &nbsp;&nbsp;&nbsp;&nbsp;Se conseguir, vence o jogo imediatamente.<br>
            &nbsp;&nbsp;&nbsp;&nbsp;Se errar qualquer pedra, o oponente vence.
          </small>
        </li>
      </ul>
    </div>
    <!-- Tabuleiro central -->
    <div id="tabuleiro-center">
      <div id="linha-vertical-pedras"></div>
      <div id="circle-pedras">
        <!-- pedras renderizadas via JS -->
      </div>
      <div id="tabuleiro-wrapper" style="width:740px;height:320px;position:relative;display:inline-block;">
        <img id="tabuleiro" src="https://github.com/AliceDeSa/Tellstones/blob/main/Tabuleiro.jpg?raw=true" alt="Tabuleiro Tellstones" style="width:740px;height:320px;object-fit:contain;" />
        <div id="pedras-mesa"></div>
        <!-- Marcadores de ponto à esquerda (Jogador 1 ou Dupla 1) -->
        <div class="marcador-ponto marcador-esquerda" data-idx="0"></div>
        <div class="marcador-ponto marcador-esquerda" data-idx="1"></div>
        <div class="marcador-ponto marcador-esquerda" data-idx="2"></div>
        <!-- Marcadores de ponto à direita (Jogador 2 ou Dupla 2) -->
        <div class="marcador-ponto marcador-direita" data-idx="0"></div>
        <div class="marcador-ponto marcador-direita" data-idx="1"></div>
        <div class="marcador-ponto marcador-direita" data-idx="2"></div>
        <!-- Botão e animação da moeda -->
        <button id="moeda-btn" title="Lançar moeda" style="background:none;border:none;outline:none;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:20;width:auto;height:auto;display:none;">
          <span id="moeda-animada" style="display:inline-block;width:80px;height:80px;position:relative;perspective:300px;">
            <img id="moeda-frente" src="https://github.com/AliceDeSa/Tellstones/blob/main/Cara.png?raw=true" style="width:100%;height:100%;border-radius:50%;object-fit:cover;object-position:50% 52%;position:absolute;left:0;top:0;backface-visibility:hidden;transition:transform 0.6s;box-shadow:0 2px 8px #0007;background:#222;" />
            <img id="moeda-verso" src="https://github.com/AliceDeSa/Tellstones/blob/main/Coroa.png?raw=true" style="width:100%;height:100%;border-radius:50%;object-fit:cover;object-position:50% 52%;position:absolute;left:0;top:0;backface-visibility:hidden;transform:rotateY(180deg);transition:transform 0.6s;box-shadow:0 2px 8px #0007;background:#222;" />
          </span>
        </button>
        <audio id="som-moeda" src="https://github.com/AliceDeSa/Tellstones/raw/main/moeda.mp3" preload="auto"></audio>
        <div id="botoes-acoes-laterais">
          <button id="btn-desafiar">Desafiar</button>
          <button id="btn-segabar">Se Gabar</button>
        </div>
      </div>
      <div id="pedra-central-animada" style="display:none;"></div>
    </div>
  </div>

  <!-- ================= CARTA DE AÇÕES ================= -->
  <div id="carta-acoes" style="display:none;">
    <img src="https://github.com/AliceDeSa/Tellstones/raw/main/ad5d0fc0-caaf-424b-b71c-4334c8e62921.png" alt="Carta de Ações" id="img-carta-acoes" />
    <div id="conteudo-acoes">
      <!-- As ações serão renderizadas aqui via JS -->
    </div>
  </div>

  <!-- ================= TOASTS E CRÉDITOS ================= -->
  <div id="toast-interno"></div>
  <div id="toast" style="display:none"></div>

  <!-- ================= ESCOLHA CARA OU COROA ================= -->
  <div id="escolha-cara-coroa" style="display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.7); z-index:4000; align-items:center; justify-content:center;">
    <div style="background:#222; padding:32px 40px; border-radius:16px; box-shadow:0 4px 32px #000a; text-align:center;">
      <h2>Escolha: Cara ou Coroa ?</h2>
      <button id="btn-cara" style="margin:12px 24px; font-size:1.2em; display:inline-flex; flex-direction:column; align-items:center;">
        <img src="https://github.com/AliceDeSa/Tellstones/blob/main/Cara.png?raw=true" alt="Cara" style="width:48px;height:48px;border-radius:50%;margin-bottom:6px;box-shadow:0 2px 8px #0007;" />
        Cara
      </button>
      <button id="btn-coroa" style="margin:12px 24px; font-size:1.2em; display:inline-flex; flex-direction:column; align-items:center;">
        <img src="https://github.com/AliceDeSa/Tellstones/blob/main/Coroa.png?raw=true" alt="Coroa" style="width:48px;height:48px;border-radius:50%;margin-bottom:6px;box-shadow:0 2px 8px #0007;" />
        Coroa
      </button>
    </div>
  </div>

  <!-- ================= TELA DE VITÓRIA/DERROTA ================= -->
  <div id="tela-vitoria" style="display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.85); z-index:99999; align-items:center; justify-content:center; flex-direction:column;">
    <div id="tela-vitoria-conteudo" style="background:#232942; color:#fff; padding:48px 60px; border-radius:18px; box-shadow:0 4px 32px #000a; text-align:center; max-width:90vw;">
      <h2 id="tela-vitoria-titulo">Vitória!</h2>
      <p id="tela-vitoria-msg">Parabéns, você venceu!</p>
      <button id="btn-voltar-lobby" style="margin-top:32px; font-size:1.1em; padding:12px 32px; border-radius:8px; background:#2d8cff; color:#fff; border:none; cursor:pointer;">Voltar ao Lobby</button>
    </div>
  </div>

  <!-- ================= SCRIPTS E ÁUDIO ================= -->
  <!-- Script principal do jogo -->
  <script src="script.js"></script>
  <!-- Som de fundo para tela inicial e lobby -->
  <audio id="som-fundo" src="https://github.com/AliceDeSa/Tellstones/blob/main/ambient.mp3" loop style="display:none" preload="auto"></audio>

  <div id="kofi-fixo-direita" style="position:fixed;right:24px;bottom:24px;z-index:99999;width:64px;height:64px;pointer-events:auto;"></div>

</body>

</html>